# 🎵 MusicCloudMatch：本地歌曲文件匹配与智能重命名工具

## 📌 项目定位

MusicCloudMatch 是一个模块化设计的本地音乐增强工具，当前版本专注于：

- 通过调用 `/search/match` 接口匹配歌曲信息与专辑封面
- 整合 [AudioRename](https://github.com/ChuwuYo/AudioRename) 的重命名逻辑，实现自动重命名音频文件

未来可扩展功能包括歌词嵌入、封面替换、格式转换、播放支持等。

---

## 🧩 当前功能模块

| 模块名称     | 描述                                      |
| -------- | --------------------------------------- |
| 元数据提取模块  | 提取音频文件的 title、artist、album、duration 等信息 |
| MD5 计算模块 | 计算文件 MD5 值，用于辅助匹配准确性                    |
| 匹配请求模块   | 调用 `/search/match` 接口获取网易云歌曲 ID、封面图等    |
| 封面处理模块   | 下载封面图并嵌入音频文件或保存为独立图片                    |
| 重命名模块    | 使用 AudioRename 的逻辑，根据匹配结果自动重命名文件        |
| 批量处理模块   | 支持文件夹遍历与多文件处理                           |
| 日志记录模块   | 记录处理过程中的成功、失败与异常信息                      |

---

## 🔧 匹配接口说明

- **接口地址**：`/search/match`
- **官方文档**：[API 文档](https://binaryify.github.io/NeteaseCloudMusicApi/#/)
- **请求方式**：POST（推荐，需加时间戳避免缓存）
- **必选参数**：

| 参数名        | 类型     | 说明              |
| ---------- | ------ | --------------- |
| `title`    | string | 音频文件的标题信息（非文件名） |
| `album`    | string | 专辑信息            |
| `artist`   | string | 艺术家信息           |
| `duration` | number | 时长（单位：秒）        |
| `md5`      | string | 文件的 MD5 值       |

- **调用示例**：

```
/search/match?title=富士山下&album=&artist=陈奕迅&duration=259.21&md5=bd708d006912a09d827f02e754cf8e56
```

---

## 📂 支持批量处理与文件夹选择

- 支持用户选择多个音频文件或整个文件夹进行批量匹配与重命名
- 自动遍历文件夹下所有支持格式的音频文件
- 每个文件提取元数据后调用 `/search/match` 接口进行匹配
- 匹配成功后自动重命名为“艺术家 - 歌名”格式（可配置）

---

## 🎧 支持的音频格式（需包含元数据标签）

| 格式      | 是否支持 |
| ------- | ---- |
| `.mp3`  | ✅    |
| `.flac` | ✅    |
| `.ogg`  | ✅    |
| `.m4a`  | ✅    |
| `.aac`  | ✅    |
| `.wma`  | ✅    |
| `.wv`   | ✅    |
| `.opus` | ✅    |
| `.dsf`  | ✅    |
| `.dff`  | ✅    |

> ⚠️ 注意：部分格式如 `.dsf`、`.dff` 可能需要额外解码器支持，确保 metadata 可被正确读取。

---

## 🧠 模块化设计优势

- 每个功能独立封装，便于维护与测试
- 可按需组合功能，如仅匹配不重命名，或仅重命名不嵌封面
- 后续可无缝扩展歌词匹配、格式转换、播放支持等功能

---

## 📦 依赖

```bash
npm install NeteaseCloudMusicApi music-metadata fast-glob axios
```

---

## 🧩 后续功能规划

- ✅ 匹配成功后自动下载封面图并嵌入音频文件
- ✅ 匹配成功后自动重命名文件为“艺术家 - 歌名”
- ⏳ 匹配失败时记录日志供人工校正
- ⏳ 支持歌词匹配与嵌入
- ⏳ 支持音频格式转换与压缩
- ⏳ 支持本地播放与试听功能
- ⏳ 封装为 CLI 工具或 Electron 桌面应用

---

> 本项目仅供学习使用，请尊重版权，不得用于商业用途或破坏版权行为。
